<!DOCTYPE html>
<html lang="de">
	<head>
		<title>JodelBlue WebClient - </title>
		
		<meta charset="utf8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		
		<meta name="description" content=""/>
		<meta name="keywords" content=""/>
		
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/css/bootstrap.min.css" integrity="sha384-AysaV+vQoT3kOAXZkl02PThvDr8HYKPZhNT5h/CXfBThSRXQ6jW5DO2ekP5ViFdi" crossorigin="anonymous">
		<link rel="stylesheet" href="css/font-awesome.min.css">
		<link rel="stylesheet" href="style.css" type="text/css">
		
		<link rel="shortcut icon" href="img/favicon/favicon.ico" type="image/x-icon">
		<link rel="icon" href="img/favicon/favicon.ico" type="image/x-icon">	
	</head>
	
	<body>
		
		<div class="mainContent container">

			<header class="mainHeader">
				<a href="index.php">
					<h1>
						JodelBlue
						<i class="fa fa-refresh fa-1x"></i>					</h1>					
				</a>
				<div class="clear"></div>
			</header>
		
			<div class="content row">
				<article class="topContent col-sm-8">

					<content id="posts">
												
						<article id ="postId-5838412c02cc581a5ef66f93" class="jodel" style="background-color: #FFBA00;">
							<content>
								Error: 404
							</content>
							<aside>
								<a href="index.php?vote=up&postID=5838412c02cc581a5ef66f93">
									<i class="fa fa-angle-up fa-3x"></i>
								</a>	
									<br />
								0<br />
								<a href="index.php?vote=down&postID=5838412c02cc581a5ef66f93">
									<i class="fa fa-angle-down fa-3x"></i>
								</a>
							</aside>
						
							<footer>
								<table>
									<tr>
										<td class="time">
											<span data-tooltip="Time">
												<i class="fa fa-clock-o"></i>
												13s											</span> 
										</td>
										<td class="comments">
																						<span data-tooltip="Comments">
												<a href="index.php?getPostDetails=true&postID=5838412c02cc581a5ef66f93">
													<i class="fa fa-commenting-o"></i>
													0													</a>
											</span>
																					</td>
										<td class="distance">
											<span data-tooltip="Distance">
												<i class="fa fa-map-marker"></i>
												1 km
											</span>
										</td>
									</tr>
								</table>
							</footer>
						</article>	
					</content>
				</article>
			
				<aside class="topSidebar col-sm-4 sidebar-outer">
					<article>
						<h2>Position</h2>
						<form method="get">
							<input type="text" id="city" name="city" placeholder="Ilmenau" required>

							<input type="submit" value="Set Location" /> 
						</form>
						
					</article>

					<article>
						<h2>Karma</h2>
						-1062					</article>

					<article>
												<h2>New Jodel</h2>
						<form method="POST">
							<textarea id="message" name="message" placeholder="Send a Jodel to all students within 10km" required></textarea> 
							<br />
							<input type="submit" value="SEND" /> 
						</form>
						
					</article>
						
					<article>
						<h2>Login</h2>
					</article>
				</aside>
			</div>
			<div id="sortJodelBy" class="row">
				<div class="col-sm-12">
					<div class="row">
						<div class="col-sm-3">
							<a href="index.php" class="active"><i class="fa fa-clock-o fa-3x"></i></a>
						</div>
						<div class="col-sm-3">
							<a href="index.php?commentView=true" ><i class="fa fa-commenting-o fa-3x"></i></a>
						</div>
						<div class="col-sm-3">
							<a href="index.php?upVoteView=true" ><i class="fa fa-angle-up fa-3x"></i></a>
						</div>
						<div class="col-sm-3">
							<nav>
								<a href="./impressum.html">Impressum</a> | <a href="./datenschutz.html">Datenschutz</a>
							</nav>
						</div>
					</div>
				</div>	
			</div>
		</div>
		
		
		<!-- jQuery, Tether and Bootstrap JS -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" integrity="sha384-3ceskX3iaEnIogmQchP8opvBy3Mi7Ce34nWjpBIwVTHfGYWQS9jwHDVRnpKKHJg7" crossorigin="anonymous"></script>
    	<script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.3.7/js/tether.min.js" integrity="sha384-XTs3FgkjiBgo8qjEjBk0tGmf3wPrWtA6coPfQDfFEY8AnYJwjalXCiosYRBIBZX8" crossorigin="anonymous"></script>
    	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.5/js/bootstrap.min.js" integrity="sha384-BLiI7JTZm+JWlgKa0M0kGRpJbF2J8q+qreVrKBC47e3K6BW78kGLrCkeRX6I9RoK" crossorigin="anonymous"></script>

		<script>
			$('a').on('click', function(){
			    $('a').removeClass('selected');
			    $(this).addClass('selected');
			});

						$(document).ready(function() {
				var win = $(window);
				var lastPostId = "583817b60fe7f15e06e629de";
				var old_lastPostId = "";
				var morePostsAvailable = true;
				// Each time the user scrolls
				win.scroll(function() {
					// End of the document reached?
					if (($(document).height() - win.height() == win.scrollTop()) && morePostsAvailable) {
						$('#loading').show();

						
						
						$.ajax({
							url: 'get-posts-ajax.php?lastPostId=' + lastPostId,
							dataType: 'html',
							async: true,
							success: function(html) {
								var div = document.createElement('div');
								div.innerHTML = html;
								var elements = div.childNodes;
								old_lastPostId = lastPostId;
								lastPostId = elements[3].textContent;
								lastPostId = lastPostId.replace(/\s+/g, '');
								//alert('Neu: ' + lastPostId + " Alt: " + old_lastPostId);
								if(lastPostId == old_lastPostId) {
									
									//morePostsAvailable = false;
								}
								else {
									//alert(elements[3].textContent);
									$('#posts').append(elements[1].innerHTML);
								}
								$('#loading').hide();
							}
						});
					}
				});
			});	
				</script>

	</body>
</html>

